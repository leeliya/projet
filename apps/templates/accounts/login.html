{% extends 'layouts/base-fullscreen.html' %}

{% block title %} Connexion {% endblock title %}

<!-- Specific CSS goes HERE -->
{% block stylesheets %}
<style>
  .login-card {
    background: white !important;
    border: 1px solid #dee2e6 !important;
    box-shadow: 0 8px 32px rgba(0,0,0,0.15) !important;
  }
  
  body.dark-version .login-card {
    background: #404B69 !important;
    border: 1px solid rgba(255,255,255,0.1) !important;
    box-shadow: 0 8px 32px rgba(0,0,0,0.3) !important;
  }
  
  .login-header {
    background: linear-gradient(135deg, #6a007d 0%, #cb0c9f 100%) !important;
    -webkit-background-clip: text !important;
    -webkit-text-fill-color: transparent !important;
    background-clip: text !important;
  }
  
  .btn-login {
    background: linear-gradient(135deg, #6a007d 0%, #cb0c9f 100%) !important;
    border: none !important;
    color: white !important;
  }
  
  .btn-register {
    background: linear-gradient(135deg, #6a007d 0%, #cb0c9f 100%) !important;
    border: none !important;
    color: white !important;
  }
  
  body.dark-version {
    background: linear-gradient(135deg, #283149 0%, #1a1f2e 100%) !important;
  }
  
  body.dark-version label {
    color: #ffffff !important;
  }
</style>
<script>
// Apply saved theme on page load
document.addEventListener('DOMContentLoaded', function() {
  const savedTheme = localStorage.getItem('theme');
  if (savedTheme === 'dark') {
    document.body.classList.add('dark-version');
  }
});
</script>
{% endblock stylesheets %}

{% block content %}

  <div class="container position-sticky z-index-sticky top-0">
    <div class="row">
      <div class="col-12">

        {% include "includes/navigation-fullscreen.html" %}

      </div>
    </div>
  </div>


  <main class="main-content  mt-0">
    <section>
      <div class="page-header min-vh-75">
        <div class="container">
          <div class="row">
            <div class="col-xl-4 col-lg-5 col-md-6 d-flex flex-column mx-auto">
              <div class="card card-plain mt-8 login-card">
                <div class="card-header pb-0 text-left bg-transparent">
                  <h5 class="font-weight-bolder login-header">
                     Connexion SafeNet
                  </h5>
                  <p class="mb-0">
                    {% if msg %}
                      {{ msg }}
                    {% endif %}
                  </p>
                </div>
                <div class="card-body">
                  <form method="POST" action="/login">
                    <div class="mb-3">
                      <label for="username" class="form-label">Nom d'utilisateur</label>
                      <input type="text" class="form-control" id="username" name="username" required autofocus>
                    </div>
                    <div class="mb-3">
                      <label for="password" class="form-label">Mot de passe</label>
                      <input type="password" class="form-control" id="password" name="password" required>
                    </div>
                    <div class="d-flex justify-content-between align-items-center">
                      <button type="submit" class="btn btn-login">Connexion</button>
                      <a href="/register" class="btn btn-register">Cr√©er un compte</a>
                    </div>
                  </form>
                </div>
                <!-- ...existing code... -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  {% include "includes/footer-fullscreen.html" %}

{% endblock content %}

<!-- Specific JS goes HERE --> 
{% block javascripts %}

<script>

  // Save aKey in localStorage 
  const asyncLocalStorage = {
      setItem: function (key, value) {
          return Promise.resolve().then(function () {
              localStorage.setItem(key, value);
          });
      }
  }


// No custom JS needed: classic form POST handles login

</script>

{% endblock javascripts %}